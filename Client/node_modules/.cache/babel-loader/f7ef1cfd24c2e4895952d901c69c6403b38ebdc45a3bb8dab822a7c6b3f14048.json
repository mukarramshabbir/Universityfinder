{"ast":null,"code":"import axios from \"axios\";\nexport async function fetchUniversityData() {\n  try {\n    const response = await axios.get(\"http://localhost:5000/api/universities\"); // Adjust URL if needed\n    console.log(response.data);\n    return response.data.universities || []; // Assuming backend returns { universities: [...] }\n  } catch (error) {\n    console.error(\"Error fetching university data from MongoDB:\", error);\n    return [];\n  }\n}\n\n// Update the recommendUniversities function to handle the new preferences\nexport function recommendUniversities(universities, preferences) {\n  if (!universities || universities.length === 0) {\n    return [];\n  }\n\n  // Calculate match score for each university\n  const scoredUniversities = universities.map(university => {\n    let score = 0;\n    let maxPossibleScore = 0;\n\n    // Location preference - region\n    if (preferences.locationRegion && preferences.locationRegion !== \"Any Region\") {\n      maxPossibleScore += 3;\n      // Simple check if the university location contains the region name\n      if (university.Location.toLowerCase().includes(preferences.locationRegion.toLowerCase())) {\n        score += 3;\n      }\n    }\n\n    // Location preference - specific city\n    if (preferences.location) {\n      maxPossibleScore += 3;\n      if (university.Location.toLowerCase().includes(preferences.location.toLowerCase())) {\n        score += 3;\n      }\n    }\n\n    // Tuition fee preference for undergraduate\n    if (preferences.maxUgTuition && (preferences.studyLevel === \"undergraduate\" || preferences.studyLevel === \"both\")) {\n      maxPossibleScore += 2;\n      const feeText = university.UG_Tuition_Fee;\n      const domesticFeeMatch = feeText.match(/£([\\d,]+)/);\n      if (domesticFeeMatch) {\n        const fee = Number.parseInt(domesticFeeMatch[1].replace(\",\", \"\"));\n        if (fee <= preferences.maxUgTuition) {\n          score += 2;\n        }\n      }\n    }\n\n    // Tuition fee preference for masters\n    if (preferences.maxMastersTuition && (preferences.studyLevel === \"masters\" || preferences.studyLevel === \"both\")) {\n      maxPossibleScore += 2;\n      const feeText = university.Masters_Tuition_Fee;\n      const domesticFeeMatch = feeText.match(/£([\\d,]+)/);\n      if (domesticFeeMatch) {\n        const fee = Number.parseInt(domesticFeeMatch[1].replace(\",\", \"\"));\n        if (fee <= preferences.maxMastersTuition) {\n          score += 2;\n        }\n      }\n    }\n\n    // On-campus accommodation\n    if (preferences.onCampusAccommodation) {\n      maxPossibleScore += 1;\n      if (university.On_Campus_Accommodation === \"Yes\") {\n        score += 1;\n      }\n    }\n\n    // Exchange students acceptance\n    if (preferences.exchangeProgram) {\n      maxPossibleScore += 1;\n      if (university.Exchange_Students_Acceptance === \"Yes\") {\n        score += 1;\n      }\n    }\n\n    // Ranking preference\n    if (preferences.minRanking) {\n      maxPossibleScore += 2;\n      const ranking = Number.parseInt(university.Ranking);\n      if (!isNaN(ranking) && ranking <= preferences.minRanking) {\n        score += 2;\n      }\n    }\n\n    // Research opportunities\n    if (preferences.researchOpportunities) {\n      maxPossibleScore += 1;\n      if (university.Research_Opportunities === \"Yes\") {\n        score += 1;\n      }\n    }\n\n    // Scholarship availability\n    if (preferences.scholarshipNeeded) {\n      maxPossibleScore += 2;\n      if (university.Scholarship_Availability && university.Scholarship_Availability !== \"No\") {\n        score += 2;\n      }\n    }\n\n    // Employment rate\n    if (preferences.minEmploymentRate) {\n      maxPossibleScore += 2;\n      const employmentRate = Number.parseInt(university.Employment_Rate_After_Graduation);\n      if (!isNaN(employmentRate) && employmentRate >= preferences.minEmploymentRate) {\n        score += 2;\n      }\n    }\n\n    // Student to faculty ratio\n    if (preferences.studentFacultyRatio) {\n      maxPossibleScore += 1;\n      const ratio = university.Student_to_Faculty_Ratio;\n      const numericRatio = Number.parseInt(ratio.split(\":\")[0]);\n      if (preferences.studentFacultyRatio === \"low\" && numericRatio <= 15) {\n        score += 1;\n      } else if (preferences.studentFacultyRatio === \"medium\" && numericRatio > 15 && numericRatio <= 25) {\n        score += 1;\n      } else if (preferences.studentFacultyRatio === \"high\" && numericRatio > 25) {\n        score += 1;\n      }\n    }\n\n    // International student population\n    if (preferences.internationalStudentPercentage) {\n      maxPossibleScore += 1;\n      const population = university.International_Student_Population;\n      const percentage = Number.parseInt(population);\n      if (preferences.internationalStudentPercentage === \"low\" && percentage < 15) {\n        score += 1;\n      } else if (preferences.internationalStudentPercentage === \"medium\" && percentage >= 15 && percentage <= 30) {\n        score += 1;\n      } else if (preferences.internationalStudentPercentage === \"high\" && percentage > 30) {\n        score += 1;\n      }\n    }\n\n    // Club interests\n    if (preferences.clubInterests && preferences.clubInterests.length > 0) {\n      maxPossibleScore += 2;\n      let clubScore = 0;\n      const clubsText = university.Clubs_Societies || \"\";\n      preferences.clubInterests.forEach(interest => {\n        if (clubsText.toLowerCase().includes(interest.toLowerCase())) {\n          clubScore += 0.5; // Partial score for each matching interest\n        }\n      });\n\n      // Cap the club score at 2\n      score += Math.min(clubScore, 2);\n    }\n\n    // Calculate percentage match (if no preferences were set, default to 0)\n    const normalizedScore = maxPossibleScore > 0 ? score / maxPossibleScore : 0;\n    return {\n      ...university,\n      score: normalizedScore\n    };\n  });\n\n  // Sort by score (highest first)\n  return scoredUniversities.sort((a, b) => b.score - a.score);\n}","map":{"version":3,"names":["axios","fetchUniversityData","response","get","console","log","data","universities","error","recommendUniversities","preferences","length","scoredUniversities","map","university","score","maxPossibleScore","locationRegion","Location","toLowerCase","includes","location","maxUgTuition","studyLevel","feeText","UG_Tuition_Fee","domesticFeeMatch","match","fee","Number","parseInt","replace","maxMastersTuition","Masters_Tuition_Fee","onCampusAccommodation","On_Campus_Accommodation","exchangeProgram","Exchange_Students_Acceptance","minRanking","ranking","Ranking","isNaN","researchOpportunities","Research_Opportunities","scholarshipNeeded","Scholarship_Availability","minEmploymentRate","employmentRate","Employment_Rate_After_Graduation","studentFacultyRatio","ratio","Student_to_Faculty_Ratio","numericRatio","split","internationalStudentPercentage","population","International_Student_Population","percentage","clubInterests","clubScore","clubsText","Clubs_Societies","forEach","interest","Math","min","normalizedScore","sort","a","b"],"sources":["E:/Work/Fiverr/28/Abdi_Fiverr/Awais/W1899505 FYP/W1899505 FYP/W1899505 FYP/test/test/Client/src/services/universityService.js"],"sourcesContent":["import axios from \"axios\"\n\nexport async function fetchUniversityData() {\n  try {\n    const response = await axios.get(\"http://localhost:5000/api/universities\") // Adjust URL if needed\n    console.log(response.data)\n    return response.data.universities || [] // Assuming backend returns { universities: [...] }\n  } catch (error) {\n    console.error(\"Error fetching university data from MongoDB:\", error)\n    return []\n  }\n}\n\n\n// Update the recommendUniversities function to handle the new preferences\nexport function recommendUniversities(universities, preferences) {\n  if (!universities || universities.length === 0) {\n    return []\n  }\n\n  // Calculate match score for each university\n  const scoredUniversities = universities.map((university) => {\n    let score = 0\n    let maxPossibleScore = 0\n\n    // Location preference - region\n    if (preferences.locationRegion && preferences.locationRegion !== \"Any Region\") {\n      maxPossibleScore += 3\n      // Simple check if the university location contains the region name\n      if (university.Location.toLowerCase().includes(preferences.locationRegion.toLowerCase())) {\n        score += 3\n      }\n    }\n\n    // Location preference - specific city\n    if (preferences.location) {\n      maxPossibleScore += 3\n      if (university.Location.toLowerCase().includes(preferences.location.toLowerCase())) {\n        score += 3\n      }\n    }\n\n    // Tuition fee preference for undergraduate\n    if (preferences.maxUgTuition && (preferences.studyLevel === \"undergraduate\" || preferences.studyLevel === \"both\")) {\n      maxPossibleScore += 2\n      const feeText = university.UG_Tuition_Fee\n      const domesticFeeMatch = feeText.match(/£([\\d,]+)/)\n      if (domesticFeeMatch) {\n        const fee = Number.parseInt(domesticFeeMatch[1].replace(\",\", \"\"))\n        if (fee <= preferences.maxUgTuition) {\n          score += 2\n        }\n      }\n    }\n\n    // Tuition fee preference for masters\n    if (preferences.maxMastersTuition && (preferences.studyLevel === \"masters\" || preferences.studyLevel === \"both\")) {\n      maxPossibleScore += 2\n      const feeText = university.Masters_Tuition_Fee\n      const domesticFeeMatch = feeText.match(/£([\\d,]+)/)\n      if (domesticFeeMatch) {\n        const fee = Number.parseInt(domesticFeeMatch[1].replace(\",\", \"\"))\n        if (fee <= preferences.maxMastersTuition) {\n          score += 2\n        }\n      }\n    }\n\n    // On-campus accommodation\n    if (preferences.onCampusAccommodation) {\n      maxPossibleScore += 1\n      if (university.On_Campus_Accommodation === \"Yes\") {\n        score += 1\n      }\n    }\n\n    // Exchange students acceptance\n    if (preferences.exchangeProgram) {\n      maxPossibleScore += 1\n      if (university.Exchange_Students_Acceptance === \"Yes\") {\n        score += 1\n      }\n    }\n\n    // Ranking preference\n    if (preferences.minRanking) {\n      maxPossibleScore += 2\n      const ranking = Number.parseInt(university.Ranking)\n      if (!isNaN(ranking) && ranking <= preferences.minRanking) {\n        score += 2\n      }\n    }\n\n    // Research opportunities\n    if (preferences.researchOpportunities) {\n      maxPossibleScore += 1\n      if (university.Research_Opportunities === \"Yes\") {\n        score += 1\n      }\n    }\n\n    // Scholarship availability\n    if (preferences.scholarshipNeeded) {\n      maxPossibleScore += 2\n      if (university.Scholarship_Availability && university.Scholarship_Availability !== \"No\") {\n        score += 2\n      }\n    }\n\n    // Employment rate\n    if (preferences.minEmploymentRate) {\n      maxPossibleScore += 2\n      const employmentRate = Number.parseInt(university.Employment_Rate_After_Graduation)\n      if (!isNaN(employmentRate) && employmentRate >= preferences.minEmploymentRate) {\n        score += 2\n      }\n    }\n\n    // Student to faculty ratio\n    if (preferences.studentFacultyRatio) {\n      maxPossibleScore += 1\n      const ratio = university.Student_to_Faculty_Ratio\n      const numericRatio = Number.parseInt(ratio.split(\":\")[0])\n\n      if (preferences.studentFacultyRatio === \"low\" && numericRatio <= 15) {\n        score += 1\n      } else if (preferences.studentFacultyRatio === \"medium\" && numericRatio > 15 && numericRatio <= 25) {\n        score += 1\n      } else if (preferences.studentFacultyRatio === \"high\" && numericRatio > 25) {\n        score += 1\n      }\n    }\n\n    // International student population\n    if (preferences.internationalStudentPercentage) {\n      maxPossibleScore += 1\n      const population = university.International_Student_Population\n      const percentage = Number.parseInt(population)\n\n      if (preferences.internationalStudentPercentage === \"low\" && percentage < 15) {\n        score += 1\n      } else if (preferences.internationalStudentPercentage === \"medium\" && percentage >= 15 && percentage <= 30) {\n        score += 1\n      } else if (preferences.internationalStudentPercentage === \"high\" && percentage > 30) {\n        score += 1\n      }\n    }\n\n    // Club interests\n    if (preferences.clubInterests && preferences.clubInterests.length > 0) {\n      maxPossibleScore += 2\n      let clubScore = 0\n      const clubsText = university.Clubs_Societies || \"\"\n\n      preferences.clubInterests.forEach((interest) => {\n        if (clubsText.toLowerCase().includes(interest.toLowerCase())) {\n          clubScore += 0.5 // Partial score for each matching interest\n        }\n      })\n\n      // Cap the club score at 2\n      score += Math.min(clubScore, 2)\n    }\n\n    // Calculate percentage match (if no preferences were set, default to 0)\n    const normalizedScore = maxPossibleScore > 0 ? score / maxPossibleScore : 0\n\n    return {\n      ...university,\n      score: normalizedScore,\n    }\n  })\n\n  // Sort by score (highest first)\n  return scoredUniversities.sort((a, b) => b.score - a.score)\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}